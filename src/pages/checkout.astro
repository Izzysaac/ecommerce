---
import CheckoutLayout from "../layouts/CheckoutLayout.astro";
import Logotipo from "../assets/logotipo.png";
import { Image } from "astro:assets";
import OrderSummary from "../components/cart/OrderSummary.astro";
---

<CheckoutLayout>
	<main class="checkout">
		<div class="flex justify-center mb-8">
			<Image src={Logotipo} alt="Logotipo" width={200} height={200} />
		</div>
	
		<section id="emptyState" class="empty" hidden>
			<p>Tu carrito está vacío.</p>
			<a class="btn" href="/catalog">Volver al catálogo</a>
		</section>

		<section id="checkoutContent" class="content" hidden>
			<div class="flex flex-col gap-8">

				<OrderSummary />

				<section class="">
					<h2 class="text-lg font-semibold">Datos del envío</h2>
					<form id="customerForm" novalidate>
						<label class="field">
							<small>Nombre completo
								<!-- <small class="error" data-for="name" aria-live="polite"></small> -->
							</small>
							<input id="customerName" name="name" type="text" autocomplete="name" required placeholder="Nombre completo" />
						</label>

						<label class="field">	
							<small>Teléfono
								<!-- <small class="error" data-for="phone" aria-live="polite"></small> -->
							</small>
							<input id="customerPhone" name="phone" type="tel" inputmode="tel" autocomplete="tel" required placeholder="Teléfono" />
						</label>

						<label class="field">
							<small>Dirección completa
								<!-- <small class="error" data-for="address" aria-live="polite"></small> -->
							</small>
							<textarea id="customerAddress" name="address" rows="4" autocomplete="street-address" required placeholder="Dirección completa" class="field-sizing-content"></textarea>
						</label>

						<div class="actions">
							<button id="whatsappBtn" type="button" class="btn primary" disabled>
								Pedir por WhatsApp
							</button>
							<p id="formHint" class="hint" aria-live="polite"></p>
						</div>
					</form>
				</section> 
			</div>
		</section>
	</main>
</CheckoutLayout>

<script src="../scripts/checkout.js"></script>

<style is:global>
	.checkout {
		max-width: 1100px;
		margin: 0 auto;
		padding: 24px 16px 48px;
	}

	.grid {
		display: grid;
		grid-template-columns: minmax(280px, 420px) 1fr;
		gap: 18px;
		align-items: start;
	}

	@media (max-width: 900px) {
		.grid {
			grid-template-columns: 1fr;
		}
	}

	.customer {
		border: 1px solid rgba(0, 0, 0, 0.12);
		border-radius: 12px;
		padding: 16px;
		background: white;
	}

	.field {
		display: flex;
		flex-direction: column;
		gap: 6px;
		margin-top: 12px;
	}

	.field input,
	.field textarea {
		padding: 10px 12px;
		border-radius: 10px;
		border: 1px solid rgba(0, 0, 0, 0.18);
		outline: none;
		font: inherit;
		background: white;
	}

	.field input:focus,
	.field textarea:focus {
		border-color: rgba(0, 0, 0, 0.45);
	}

	.error {
		min-height: 16px;
		color: #b00020;
		font-size: 12px;
	}

	.actions {
		margin-top: 14px;
		display: flex;
		flex-direction: column;
		gap: 8px;
	}

	.btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		gap: 8px;
		padding: 10px 14px;
		border-radius: 10px;
		border: 1px solid rgba(0, 0, 0, 0.18);
		background: white;
		color: inherit;
		text-decoration: none;
		cursor: pointer;
	}

	.btn.primary {
		background: #111;
		border-color: #111;
		color: white;
	}

	.btn:disabled {
		opacity: 0.55;
		cursor: not-allowed;
	}

	.empty {
		border: 1px dashed rgba(0, 0, 0, 0.2);
		border-radius: 12px;
		padding: 18px;
		background: rgba(0, 0, 0, 0.02);
	}

	.hint {
		min-height: 18px;
		font-size: 12px;
		color: rgba(0, 0, 0, 0.7);
		margin: 0;
	}
</style>

